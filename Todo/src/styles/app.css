@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

:root{
  /* Colors */
  --bg-1: linear-gradient(90deg,#06b4a2,#170481);
  --card: #ffffff;
  --muted: #7f8c8d;
  --accent: #4FACFE;
  --accent-strong: #3498db;
  --success: #27ae60;
  --danger: #e74c3c;
  --warning: #f39c12;
  --glass: rgba(255,255,255,0.06);

  /* Sizes */
  --max-width: 980px;
  --radius-lg: 12px;
  --radius-sm: 8px;
  --gap: 1rem;

  /* Typography */
  --ui-font: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --base: 16px;
  --scale: 1.05;
  --shadow-1: 0 10px 25px rgba(2,6,23,0.12);
  --shadow-2: 0 6px 18px rgba(2,6,23,0.08);
}

*,
*::before,
*::after{box-sizing: border-box; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;}

html { font-size: var(--base); height: 100%; }
body {
  margin: 0;
  min-height: 100%;
  font-family: var(--ui-font);
  color: #0f1724;
  background: var(--bg-1);
  -webkit-font-smoothing:antialiased;
  line-height: 1.45;
  transition: background 600ms ease, color 300ms ease;
}

/* dark mode using a class or user preference */
@media (prefers-color-scheme: dark) {
  :root { /* slightly adjust defaults for dark-preferred systems */
    --card: #121317;
    --muted: #a6b0b8;
    --shadow-1: 0 10px 30px rgba(1,2,6,0.6);
  }
}

.app {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start; /* corrected */
  padding: clamp(1rem, 3vw, 3rem);
  gap: var(--gap);
  transition: background 850ms cubic-bezier(.2,.9,.3,1);
  background: var(--bg-1);
}

/* Toggle-able dark class */
.app.dark {
  background: linear-gradient(90deg,#141E30,#243B55);
  color: #e6eef6;
}

/* Main container */
.main {
  width: 100%;
  max-width: var(--max-width);
  background: var(--card);
  border-radius: var(--radius-lg);
  padding: clamp(1rem, 2.5vw, 2rem);
  box-shadow: var(--shadow-1);
  transition: transform 300ms ease, box-shadow 300ms ease, background 300ms ease;
}

/* dark mode card adjustments */
.app.dark .main {
  background: color-mix(in srgb, var(--card) 20%, black);
  box-shadow: 0 8px 24px rgba(0,0,0,0.45);
}

/* Header */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap: 1rem;
  margin-bottom: 1rem;
}

h1{
  margin:0;
  font-size: clamp(1.25rem, 2.2vw, 1.6rem);
  font-weight:600;
  letter-spacing: -0.01em;
}

/* user info & logout */
.user-info { display:flex; gap: .75rem; align-items:center; font-size: .95rem; }
.logout-btn {
  padding: .5rem .85rem;
  background: #ff4757;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: var(--shadow-2);
  transition: transform 150ms ease, filter 150ms ease;
}
.logout-btn:hover { transform: translateY(-2px); filter:brightness(.98) }
.app.dark .logout-btn { background:#ff6b72 }

/* Controls layout */
.actions {
  display:flex;
  justify-content:space-between;
  gap: .75rem;
  margin: 1rem 0;
  flex-wrap:wrap;
}
.actions select,
.actions button {
  padding: .6rem .9rem;
  border-radius: 10px;
  border: 1px solid rgba(0,0,0,0.06);
  font-weight:600;
  cursor:pointer;
}

/* Add section */
.add-section{
  display:flex;
  gap: .6rem;
  flex-wrap:wrap;
  align-items:center;
  margin-bottom: 1rem;
}
.add-section input,
.add-section select {
  padding: .6rem .8rem;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(10,10,10,0.06);
  font-size: .98rem;
  min-width: 0;
}
.add-section input[type="text"]{ flex: 1 1 320px; }
.add-section input[type="date"]{ flex: 0 0 150px; }
.add-section button{
  padding: .6rem 1rem;
  background: linear-gradient(180deg,var(--accent),var(--accent-strong));
  border: none;
  color: #001;
  font-weight:700;
  border-radius: 10px;
  cursor: pointer;
  transition: transform 180ms ease, box-shadow 180ms ease;
}
.add-section button:active { transform: translateY(1px) }

/* Todo list container */
.todo-list{
  display:flex;
  flex-direction:column;
  gap: .75rem;
}

/* Each todo â€” use grid for predictable layout */
.todo {
  display:grid;
  grid-template-columns: auto 1fr auto;
  align-items:center;
  gap: .75rem;
  padding: .9rem 1rem;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(255,255,255,0.02));
  border: 1px solid rgba(10,10,10,0.04);
  transition: transform 180ms ease, box-shadow 180ms ease, background 200ms ease;
}
.todo:hover { transform: translateY(-3px); box-shadow: var(--shadow-2) }

/* Left: checkbox / status */
.todo input[type="checkbox"]{
  width: 20px; height:20px; accent-color: var(--accent-strong); cursor:pointer;
  grid-row: 1 / 3;
}

/* Center: content */
.todo-content{
  display:flex;
  flex-direction:column;
  gap: .3rem;
  min-width: 0;
}
.todo-title{
  font-weight:600;
  font-size: 1rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.todo-meta{
  display:flex;
  gap: .5rem;
  align-items:center;
  font-size: .85rem;
  color: var(--muted);
}

/* Category badge */
.category{
  padding: .18rem .6rem;
  background: var(--warning);
  color: white;
  border-radius: 999px;
  font-weight:700;
  font-size: .8rem;
}

/* Right: due date + actions */
.due-date{
  font-size: .9rem;
  color: var(--muted);
  text-align:right;
}
.due-date.overdue{
  color: var(--danger);
  font-weight:700;
}

/* Actions group */
.todo-actions{
  display:flex;
  gap: .4rem;
  align-items:center;
  justify-self:end;
}
.todo-actions button{
  padding:.45rem .55rem;
  border-radius:8px;
  border:none;
  cursor:pointer;
  background: transparent;
  font-size: 1rem;
  transition: background 160ms ease, transform 140ms ease;
}
.edit-btn:hover { background: rgba(52,152,219,0.12); transform: translateY(-1px) }
.delete-btn:hover { background: rgba(231,76,60,0.1); transform: translateY(-1px) }

/* Completed, overdue states */
.todo.done {
  opacity: .85;
  text-decoration: line-through;
  background: linear-gradient(180deg,#eafbe9,#d3ffd3);
  color: #3b3b3b;
}
.todo.overdue { border-left: 4px solid var(--danger); }

/* Edit form inside todo */
.edit-form{
  display:flex;
  gap:.5rem;
  align-items:center;
  width:100%;
  flex-wrap:wrap;
}
.edit-form input,
.edit-form select {
  padding:.45rem .6rem;
  border:1px solid rgba(0,0,0,0.06);
  border-radius:8px;
  font-size:.92rem;
}
.edit-form button{
  padding:.45rem .7rem;
  border-radius:8px;
  font-weight:700;
  border:none;
}
.edit-form button.save { background: var(--success); color: white; }
.edit-form button.cancel { background: #95a5a6; color: white; }

/* Auth container */
.auth-container{
  display:flex;
  justify-content:center;
  align-items:center;
  min-height: 100vh;
  padding: 2rem;
}
.auth-form{
  width:100%;
  max-width:420px;
  background: var(--card);
  padding: clamp(1.2rem, 3vw, 2.2rem);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-1);
}
.auth-form h2{ text-align:center; margin:0 0 1rem 0; color:inherit; }
.form-group { margin-bottom: .9rem; }
.form-group input{
  width:100%; padding:.9rem; border-radius:8px; border:1px solid rgba(0,0,0,0.06);
  font-size:1rem;
}
.auth-form button{
  width:100%; padding:.75rem; border-radius:10px; border:none;
  background: linear-gradient(180deg,var(--accent),var(--accent-strong));
  color: #001; font-weight:700; cursor:pointer;
}

/* Loading screen */
.loading{ display:flex; justify-content:center; align-items:center; min-height:12rem; font-size:1rem; color:var(--muted) }

/* Toggle mode button */
.toggle-mode{
  position: fixed;
  top: 20px;
  right: 20px;
  background: rgba(255,255,255,0.06);
  border: none; padding:.55rem .6rem; border-radius:999px; cursor:pointer;
  box-shadow: var(--shadow-2);
  transition: transform 160ms ease, background 200ms ease;
}
.toggle-mode:active { transform: scale(.98) }
.app.dark .toggle-mode { background: rgba(255,255,255,0.03) }

/* Focus styles for accessibility */
:focus {
  outline: none;
}
button:focus, input:focus, select:focus, a:focus {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 18%, transparent);
  border-radius: 8px;
}

/* Responsive adjustments */
@media (max-width: 720px) {
  .todo { grid-template-columns: auto 1fr; grid-template-rows: auto auto; }
  .todo-actions { justify-self: start; margin-top: .5rem; }
  .due-date { text-align: left; }
  .add-section input[type="date"]{ flex:1 1 100% }
  .main { padding: 1rem; }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation-duration: 0s !important; animation-delay: 0s !important; }
}
